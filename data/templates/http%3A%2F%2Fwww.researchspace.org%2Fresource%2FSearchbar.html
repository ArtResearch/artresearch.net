<div id="search-bar">
  <mp-event-target-template-render
    id="event-target-tab-select"
    template="{{> tabSelect}}"
  >
    <template id="tabSelect">
      {{#if selectedTab}} 
         [[> rsp:SearchbarDropdown dropdownTitle="{{selectedTab}}"]]
       {{else}} 
         [[> rsp:SearchbarDropdown dropdownTitle=selectedCategory ]] 
      {{/if}}
    </template>
  </mp-event-target-template-render>

  <semantic-search>
    <semantic-search-query-keyword
      placeholder="Search the collection - Type at least 3 characters"
      domain="<http://www.w3.org/2000/01/rdf-schema#Resource>"
      default-query="
    SELECT ?keywords  WHERE {
      ?keywords a <http://no-result>
    }
  "
      query='
      SELECT ?keywords  WHERE {
         BIND(REPLACE(str(?__token__)," ","&&") as ?keys)
         BIND(REPLACE(?keys,"\\*","") as ?keywords)
      }'
    ></semantic-search-query-keyword>
    <semantic-search-result-holder>
      <mp-event-target-template-render
        id="event-target-search-btn"
        template="{{> searchButton}}"
      >
        <template id="searchButton">
          <semantic-search-result>
            <semantic-query
              id="view-more"
              query="SELECT ?keywords WHERE {}"
              template="{{>viewMoreButton}}"
            >
              <template id="viewMoreButton">
                <click-element
                  targetId="search-click"
                  keyboardKey="Enter"
                ></click-element>
                {{#if selectedTab}}
                <!-- If the user selected a tab -->
                <semantic-link
                  class="search-btn-activated"
                  iri="rsp:FilterSearch"
                  urlqueryparam-selectedTab="{{selectedTab}}"
                  urlqueryparam-keyword="{{bindings.0.keywords.value}}"
                >
                  <div
                    id="search-click"
                    style="background: white; height: 39px"
                    class="btn searchBtn"
                  >
                    Search
                    <i class="rs-icon rs-icon-search"></i>
                  </div>
                </semantic-link>
                {{else}}
                 <!-- If there is url paramater selectedtab -->
                  {{#ifCond (objectLength "[[urlParam "selectedtab"]]") "!==" 0}}
                    <semantic-link
                    class="search-btn-activated"
                    iri="rsp:FilterSearch"
                    urlqueryparam-selectedTab='[[urlParam "selectedtab"]]'
                    urlqueryparam-keyword="{{bindings.0.keywords.value}}"
                    >
                      <div
                        id="search-click"
                        style="background: white; height: 39px"
                        class="btn searchBtn"
                      >
                        Search
                        <i class="rs-icon rs-icon-search"></i>
                      </div>
                    </semantic-link>
                  {{else}}
                  <!--Else default to the artworks tab -->
                    <semantic-link
                    class="search-btn-activated"
                    iri="rsp:FilterSearch"
                    urlqueryparam-selectedTab='Artworks'
                    urlqueryparam-keyword="{{bindings.0.keywords.value}}"
                    >
                    <div
                      id="search-click"
                      style="background: white; height: 39px"
                      class="btn searchBtn"
                    >
                      Search
                      <i class="rs-icon rs-icon-search"></i>
                    </div>
                    </semantic-link>
                  {{/ifCond}}
                {{/if}}
              </template>
            </semantic-query>
            <semantic-link iri="rsp:start" class="search-btn-disabled">
              <div
                title="Provide a keyword! (at least 3 characters long)"
                style="background: white; height: 39px"
                class="btn searchBtn"
              >
                Search
                <i class="rs-icon rs-icon-search"></i>
              </div>
            </semantic-link>
          </semantic-search-result>
        </template>
      </mp-event-target-template-render>
    </semantic-search-result-holder>
  </semantic-search>
</div>
