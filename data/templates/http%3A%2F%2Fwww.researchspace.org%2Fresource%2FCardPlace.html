<div
class="rs-grid-element panel panel-default placeCard fade-in-fwd"
>
<semantic-link iri="{{subject.value}}">

  <div class="panel-body">
    <bs-col
      class="thumbnailImageContainer"
      lg="12"
      md="12"
      xs="12"
    >
  <semantic-query query='SELECT ?geonamesID WHERE{
    BIND(REPLACE("{{subject.value}}", "https://sws.geonames.org/", "") AS ?removePrefix)
    BIND(REPLACE(STR(?removePrefix), "/", "") AS ?geonamesID)
  }LIMIT 1'
  template="{{> geonamesIdTemplate}}">
  <template id="geonamesIdTemplate">
    <semantic-query query='PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
      PREFIX wd: <http://www.wikidata.org/entity/>
      PREFIX wdt: <http://www.wikidata.org/prop/direct/>
      SELECT DISTINCT ?imgUrl WHERE{
        bind("_" as ?default_imageUrl)
        OPTIONAL{
          SERVICE <https://query.wikidata.org/sparql> 
            {
              #Query Wikidata‎‎ using GeoNames ID (P1566)
                ?place wdt:P1566 "{{bindings.0.geonamesID.value}}". 
                ?place wdt:P18 ?imgUrl
            }
          }
          BIND(coalesce(?imgUrl, ?default_imageUrl) as ?imgUrl)    
            }LIMIT 1'
        template="{{> imageThumbnail}}"
      >
        <template id="imageThumbnail">
          <img
            alt="   "
            class="thumbnailImage"
            src="{{bindings.0.imgUrl.value}}?width=150"
          />
        </template>
    </semantic-query>
    </bs-col>
    <bs-col class="cardInfo" lg="12">
      <div data-flex-layout="row md-column center-stretch">
        <bs-row class="cardInfoFields">
          <h4>
            <semantic-link
              iri="{{subject.value}}"
            ></semantic-link>
 
          </h4>
          <small>
            {{placeLabel.value}}
          </small>
        </bs-row>
      </div>
    </bs-col>
  </div>

</semantic-link>
</div>