<div id="printableInfo" class="workAndProductionInfo">
  <!-- Fields for Work (Artwork or photograph) -->
  <mp-field-visualization
    subject="[[this]]"
    additional-subjects='[[jsonArrayFromSelect (setQueryBindings "SELECT ?s WHERE { ?s owl:sameAs ?resource }" resource=this.iri)]]'
    fields='[[ fieldDefinitionsFromQuery "SELECT ?field WHERE {    ?field <http://www.researchspace.org/resource/system/fields/category>  <http://www.researchspace.org/ontologies/platform/FieldCategories/work_info>.   OPTIONAL {?field <http://www.researchspace.org/resource/system/fields/order> ?w. BIND(xsd:integer(?w) as ?orderNo)}} ORDER BY ASC(?orderNo)"]]'
    template="{{>workInfo}}"
  >
    <template id="workInfo">
      {{#if noData}} {{else}}
      <div class="workInfoContainer">
        <h2>Work info</h2>
        [[> :ResourceFieldBasedVisualization subject=[[this]]
        showSourceIcon="true" ]]
      </div>
      {{/if}}
    </template>
  </mp-field-visualization>

  [[#if (ask "ASK { ?? fr:Work_from_Place ?place. ?place <http://www.w3.org/2003/01/geo/wgs84_pos#lat> ?lat. ?place <http://www.w3.org/2003/01/geo/wgs84_pos#long> ?lng. }") ]] 
  <div class="workInfoContainer">
    <h2>Current artwork location</h2>
  <div class="mapContainer">
    <semantic-map
      id="event-map"
      query="SELECT DISTINCT ?place ?lat ?lng WHERE {
        ?? fr:Work_from_Place ?place .
        ?place <http://www.w3.org/2003/01/geo/wgs84_pos#lat> ?lat.
        ?place <http://www.w3.org/2003/01/geo/wgs84_pos#long> ?lng.
      }"
      no-result-template=''
      tuple-template='<div style="width:20vw">
        <h4> 
          <semantic-query query="SELECT ?label WHERE { <{{place.value}}> rdfs:label ?label }LIMIT 1"></semantic-query>  
        </h4>
      </div>'
    >
    </semantic-map>
  </div>
  </div>
  [[/if]]

  <!-- Fields for Production -->
  <div class="productionInfoContainer">
    <mp-field-visualization
      subject="[[this]]"
      additional-subjects='[[jsonArrayFromSelect (setQueryBindings "SELECT ?s WHERE { ?s owl:sameAs ?resource }" resource=this.iri)]]'
      fields='[[ fieldDefinitionsFromQuery "SELECT ?field WHERE {  ?field <http://www.researchspace.org/resource/system/fields/category>  <http://www.researchspace.org/ontologies/platform/FieldCategories/production_info>. OPTIONAL {?field <http://www.researchspace.org/resource/system/fields/order> ?w. BIND(xsd:integer(?w) as ?orderNo)} } ORDER BY ASC(?orderNo)" ]]'
      template="{{>productionInfo}}"
    >
      <template id="productionInfo">
        {{#if noData}}
        <div></div>
        {{else}}
        <h2>Production info</h2>
        [[> :ResourceFieldBasedVisualization subject=[[this]]
        showSourceIcon="true" ]] {{/if}}
      </template>
    </mp-field-visualization>
    <!-- General fields -->
    <mp-field-visualization
      subject="[[this]]"
      additional-subjects='[[jsonArrayFromSelect (setQueryBindings "SELECT ?s WHERE { ?s owl:sameAs ?resource }" resource=this.iri)]]'
      fields='[[ fieldDefinitionsFromQuery "SELECT ?field WHERE {  ?field <http://www.researchspace.org/resource/system/fields/category>  <http://www.researchspace.org/ontologies/platform/FieldCategories/other_details>. OPTIONAL {?field <http://www.researchspace.org/resource/system/fields/order> ?w. BIND(xsd:integer(?w) as ?orderNo)} } ORDER BY ASC(?orderNo)" ]]'
      template="{{>generalInfo}}"
    >
      <template id="generalInfo">
        {{#if noData}} {{else}}
        <h2 style="margin-top: 4vh">Other details</h2>
        [[> :ResourceFieldBasedVisualization subject=[[this]]
        showSourceIcon="true" ]]
        {{/if}}
      </template>
    </mp-field-visualization>
  </div>
  <div style="width: 93.5%" class="productionInfoContainer">
    <!-- Photographs detailed information -->
    [[> :PhotographTable]]
  </div>
</div>
