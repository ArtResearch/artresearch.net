PREFIX sp: <http://spinrdf.org/sp#>
PREFIX spin: <http://spinrdf.org/spin#>
PREFIX spl: <http://spinrdf.org/spl#>
PREFIX sail: <http://www.openrdf.org/config/sail#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX example: <http://www.example.org/ontology#>
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX ephedra: <http://www.researchspace.org/resource/system/ephedra#>
PREFIX : <http://www.researchspace.org/resource/system/service/custom#>

:mail a ephedra:Service ;
	sail:sailType "researchspace:RESTSail" ;
	rdfs:label "A wrapper for AWS Mail Service." ;
	ephedra:hasSPARQLPattern (
		[
			sp:subject :_results ;
			sp:predicate example:hasSender ;
			sp:object :_sender;
		]
		[
			sp:subject :_results ;
			sp:predicate example:hasRecipient ;
			sp:object :_recipient;
		]		
		[
			sp:subject :_results ;
			sp:predicate example:hasMessage ;
			sp:object :_message;
		]    
  		[
			sp:subject :_results ;
			sp:predicate example:hasSubject ;
			sp:object :_subject;
		]
	
	) ;

	spin:constraint [
		a spl:Argument ;
		rdfs:comment "Recipient email" ;
		spl:predicate :_recipient ;
		spl:valueType xsd:string ;
  	] ;

	spin:constraint
	[
		a spl:Argument ;
		rdfs:comment "Sender email" ;
		spl:predicate :_sender ;
		spl:valueType xsd:string ;
    ] ;

	spin:constraint
	[	
		a spl:Argument ;
		rdfs:comment "Subject term" ;
		spl:predicate :_subject ;
		spl:valueType xsd:string ;
    ] ;
	
	spin:constraint
	[	
		a spl:Argument ;
		rdfs:comment "Content value" ;
		spl:predicate :_message ;
		spl:valueType xsd:string ;
    ] ;

	spin:column
	[
		a spin:Column ;
		rdfs:comment "results (fixed column, must be present)" ;
		spl:predicate :_results ;
		spl:valueType rdfs:Resource;
		ephedra:jsonPath "$"
	] .