<ol class="page-breadcrumb">
  <li class="active">Home</li>
</ol>

<mp-event-proxy
  id="clipboard-update-on-save-set"
  on-event-source="save-set-result-action"
  proxy-event-type="Component.Refresh"
  proxy-targets='["clipboard-sidebar"]'
></mp-event-proxy>

<mp-event-proxy
  id="clipboard-update-on-save-search"
  on-event-source="save-search-result-action"
  proxy-event-type="Component.Refresh"
  proxy-targets='["clipboard-sidebar"]'
></mp-event-proxy>

<mp-event-proxy
  id="clipboard-update-on-persisted-component"
  on-event-source="persit-component-action"
  proxy-event-type="Component.Refresh"
  proxy-targets='["clipboard-sidebar"]'
></mp-event-proxy>

<mp-event-proxy
  id="guided-tour-run"
  on-event-type="Component.Loaded"
  on-event-source="semantic-search"
  proxy-event-type="GuidedTour.RunIfNotSeen"
  proxy-targets='["guided-tour-search"]'
>
</mp-event-proxy>
<div class="page">
  [[#>rsp:ClipboardSidebar]]
  <div class="page__body--borderless">
    <semantic-search
      id="semantic-search"
      limit="50000"
      optimizer="blazegraph"
      categories='{
    "<http://www.researchspace.org/ontology/Concept>": [
      {
        "kind": "hierarchy",
        "queryPattern": "$subject $__relation__ ?__value__ ."
      }
    ],
    "<http://www.researchspace.org/ontology/Place>": [
      {
        "kind": "hierarchy",
        "queryPattern": "$subject ?__relation__ ?__value__ ."
      }
    ],
    "<http://www.researchspace.org/ontology/Time>": [
      {
        "kind": "date-range",
        "queryPattern": "
           {
             $subject ?__relation__ ?date .
             ?date crm:P82a_begin_of_the_begin ?begin ;
                   crm:P82b_end_of_the_end ?end .
             FILTER(?begin <= ?__dateEndValue__) .
             FILTER(?end >= ?__dateBeginValue__) .
           }
        "
      }
    ],
    "<http://www.researchspace.org/ontology/Text>": [
      {
        "kind": "text",
        [[#if solr]]
          "queryPattern":
          "
             {
             $subject a ?__domain__ .
             $subject rso:displayLabel ?label .
             { SELECT $subject WHERE {
             BIND(CONCAT(\"defType=edismax&ps=100&pf=suggestionSearchText&fl=id,score&q.op=AND&rows=5000&fq=fc:\", REPLACE(str(?__domain__), \":\", \"\\\\\\\\:\")) as ?sFC)
             BIND(CONCAT(\"(\",LCASE(?__value__),\")\") as ?lcasevalue)
             SERVICE <http://www.bigdata.com/rdf/fts#search> {
                $subject fts:search ?lcasevalue .
                $subject fts:endpoint \"[[solrEndpoint]]\" .
                $subject fts:params ?sFC .
                $subject fts:scoreField \"score\" .
                $subject fts:score ?score .
                $subject fts:fieldToSearch \"suggestionSearchText\" .
                $subject fts:searchField \"id\" .
                $subject fts:searchResultType \"URI\" .
             } } ORDER BY DESC(?score) }
                <http://www.bigdata.com/queryHints#Prior> <http://www.bigdata.com/queryHints#runFirst> \"true\"^^<http://www.w3.org/2001/XMLSchema#boolean>.
           }
          ",
          "helpPage": "<http://help.metaphacts.com/resource/SolrFullTextSearchSyntax>",
          "escapeLuceneSyntax": false
        [[else]]
          "queryPattern":
          "
             {
               $subject a ?__domain__ .
               $subject rso:displayLabel ?label .
               SERVICE <http://www.bigdata.com/rdf/search#search> {
                 ?label bds:search ?__value__ ;
                        bds:minRelevance \"0.3\" ;
                        bds:matchAllTerms \"true\"  .
               }
             }
          "
        [[/if]]

      }
    ]
  }'
      search-profile='{
    "defaultProfile": "<http://www.researchspace.org/profile/all>",
    "categoriesQuery": "
        SELECT DISTINCT ?profile ?category ?label ?thumbnail ?description WHERE {
          {
            SELECT ?category ?label ?profile ?description ?thumbnail {
              ?profile rso:hasCategory ?hasCategory.
              {
                ?hasCategory rso:category ?category .
                ?category rdf:type rso:FundamentalCategory ;
                  rdfs:label ?label ;
                  rdfs:label ?description .
                  ?category rso:hasThumbnail ?thumbnail .
              } UNION {
                BIND(<http://www.researchspace.org/ontology/Text> AS ?category)
                BIND(\"sss\" AS ?label)
                BIND(\"All\" AS ?description)
              }
            }
          } UNION {
            SELECT ?profile ?category ?label ?description ?thumbnail {
              ?category rdf:type rso:FundamentalCategory ;
                rdfs:label ?label ;
                rdfs:label ?description .
                ?category rso:hasThumbnail ?thumbnail .
              BIND(<http://www.researchspace.org/profile/all> as ?profile) .
            }
          } UNION {
            BIND(<http://www.researchspace.org/ontology/Text> as ?category) .
            BIND(\"All\" as ?label) .
            BIND(\"All\" as ?description) .
            BIND(<http://www.researchspace.org/profile/all> AS ?profile)
          }
        }

    ",
    "relationsQuery": "
        SELECT DISTINCT ?profile ?relation ?label ?description ?hasDomain ?hasRange ?order WHERE {
          {
            SELECT ?profile ?relation ?label ?hasDomain ?hasRange ?description ?orderLabel ?order {
              ?profile rso:hasRelation/rso:relation ?relation.
              ?relation rdfs:label ?label ;
                rdfs:label ?description ;
                rso:hasDomain ?hasDomain ;
                rso:hasRange ?hasRange .
              OPTIONAL { ?relation crm:P127_has_broader_term ?broader }.
              BIND(IF(BOUND(?broader), CONCAT(STR(?broader), \"1\"), CONCAT(STR(?relation), \"0\")) AS ?orderLabel)
              BIND(IF(BOUND(?broader), 15, 0) AS ?order)
            }
          } UNION {
            SELECT ?profile ?relation ?label ?hasDomain ?hasRange ?description ?orderLabel ?order  {
              ?relation rdfs:label ?label ;
                rdfs:label ?description ;
                rso:hasDomain ?hasDomain ;
                rso:hasRange ?hasRange .
                BIND(<http://www.researchspace.org/profile/all> as ?profile) .
              OPTIONAL { ?relation crm:P127_has_broader_term ?broader }.
              BIND(IF(BOUND(?broader), CONCAT(STR(?broader), \"1\"), CONCAT(STR(?relation), \"0\")) AS ?orderLabel)
              BIND(IF(BOUND(?broader), 25, 0) AS ?order)
            }
          }
        }
        ORDER BY ?orderLabel ?label
    "
  }'
    >
      <semantic-search-query-builder
        id="semantic-query-builder"
        relation-template='
      <div style="margin-left: {{order.value}}px">{{label}}</div>
    '
        resource-selector='{
      "query":
        [[#if solr]]
          "
          SELECT DISTINCT $suggestion $label WHERE {
             {
               { SELECT $suggestion ?score WHERE {
             BIND(CONCAT(\"defType=edismax&ps=100&pf=suggestionSearchText&fl=id,score&rows=1000&q.op=AND&fq=fc:\", REPLACE(str(?__range__), \":\", \"\\\\\\\\:\"), \"&fq=frs:\", REPLACE(str(?__relation__), \":\", \"\\\\\\\\:\")) as ?sFC)
             BIND(CONCAT(\"(\",LCASE(?__token__),\")\") as ?lcasetoken)
             SERVICE <http://www.bigdata.com/rdf/fts#search> {
                $suggestion fts:search ?lcasetoken .
                $suggestion fts:endpoint \"[[solrEndpoint]]\" .
                $suggestion fts:params ?sFC .
                $suggestion fts:scoreField \"score\" .
                $suggestion fts:score ?score .
                $suggestion fts:fieldToSearch \"suggestionSearchText\" .
                $suggestion fts:searchField \"id\" .
                $suggestion fts:searchResultType \"URI\" .
             } } }
             <http://www.bigdata.com/queryHints#Prior> <http://www.bigdata.com/queryHints#runFirst> \"true\"^^<http://www.w3.org/2001/XMLSchema#boolean>.
             ?suggestion rdfs:label ?label .
             BIND (STRLEN(?label) as ?len)
            }
          } ORDER BY DESC(?score) ?len LIMIT 10
          "
     [[else]]
       "
       SELECT DISTINCT $suggestion $label WHERE {
             {
               SELECT DISTINCT ?suggestion ?label ?score WHERE {
                 SERVICE <http://www.bigdata.com/rdf/search#search> {
                   $label bds:search ?__token__ ;
                   bds:relevance ?score ;
                   bds:minRelevance \"0.3\" ;
                   bds:matchAllTerms \"true\"  .
                 }
                 ?suggestion <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://pharos.artresearch.net/resource/type/pharos>.        
                 ?suggestion rdfs:label ?label ;
                             a ?__range__ .
              }
            }
            FILTER(EXISTS {
              ?subject ?__relation__ $suggestion .
              ?subject <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <https://pharos.artresearch.net/resource/type/pharos>. 
            })
          } ORDER BY DESC(?score)  LIMIT 10
       "
     [[/if]],
     "suggestionTupleTemplate": "<span title=\"{{label.value}}\">{{label.value}}</span>",
     "noSuggestionsTemplate": "<div class=\"suggestion-no-matches\">no matches found</div>"
   }'
        tree-selector='{
     "rootsQuery": "
        select distinct ?item ?label ?hasChildren where {
         <http://www.bigdata.com/queryHints#Query> <http://www.bigdata.com/queryHints#optimizer> \"None\".
         BIND(?__range__ as ?range)
         BIND(IF(?range = rso:Concept, rso:Concept_has_broader_Concept, rso:Place_is_part_of_Place)	AS ?broader) .
          {
            ?item a ?__range__ .
            ?item skos:inScheme ?schema .
            FILTER(EXISTS { ?subject ?__relation__ ?item . }) .
            MINUS { ?item ?broader ?parent }
            ?item rso:displayLabel ?label .
          }
          OPTIONAL { ?child ?broader ?item . }
          BIND(bound(?child) as ?hasChildren)
        } order by ?label",
     "childrenQuery": "
       select distinct ?item ?label ?hasChildren where {
         <http://www.bigdata.com/queryHints#Query> <http://www.bigdata.com/queryHints#optimizer> \"None\".
         BIND(?__range__ as ?range)
         BIND(IF(?range = rso:Concept, rso:Concept_has_broader_Concept, rso:Place_is_part_of_Place)	AS ?broader) .
         {
           FILTER(EXISTS { ?subject ?__relation__ ?item . }) .
           ?item ?broader ?parent .
           ?item rso:displayLabel ?label .
         }
         OPTIONAL { ?child ?broader ?item . }
         BIND(bound(?child) as ?hasChildren)
       } order by ?label",
     "parentsQuery": "
       select distinct ?item ?parent ?parentLabel where {
          <http://www.bigdata.com/queryHints#Query> <http://www.bigdata.com/queryHints#optimizer> \"None\".
         BIND(?__range__ as ?range)
         BIND(IF(?range = rso:Concept, rso:Concept_has_broader_Concept, rso:Place_is_part_of_Place)	AS ?broader) .
         ?item ?broader ?parent .
         ?parent rso:displayLabel ?parentLabel .
       }",
     "searchQuery": [[#if solr]]
       "
  SELECT DISTINCT ?item ?label ?score ?hasChildren WHERE {
            BIND(?__range__ AS ?range)
            BIND(IF(?range = rso:Concept, rso:Concept_has_broader_Concept, rso:Place_is_part_of_Place) AS ?broader)
            {
              SELECT DISTINCT ?item ?score ?label WHERE {
                {
                  SELECT DISTINCT ?item ?score ?label WHERE {
                    BIND(CONCAT(\"defType=edismax&ps=100&pf=suggestionSearchText&fl=id,score&rows=50&q.op=AND&fq=scheme:*&fq=fc:\", REPLACE(str(?__range__), \":\", \"\\\\\\\\:\"), \"&fq=frs:\", REPLACE(str(?__relation__), \":\", \"\\\\\\\\:\")) as ?sFC)
                    BIND(CONCAT(\"(\",LCASE(?__token__),\")\") as ?lcasetoken)
                    SERVICE <http://www.bigdata.com/rdf/fts#search> {
                      ?item <http://www.bigdata.com/rdf/fts#search> ?lcasetoken.
                      ?item <http://www.bigdata.com/rdf/fts#endpoint> \"[[solrEndpoint]]\".
                      ?item <http://www.bigdata.com/rdf/fts#params> ?sFC.
                      ?item <http://www.bigdata.com/rdf/fts#scoreField> \"score\".
                      ?item <http://www.bigdata.com/rdf/fts#score> ?score.
                      ?item <http://www.bigdata.com/rdf/fts#fieldToSearch> \"suggestionSearchText\".
                      ?item <http://www.bigdata.com/rdf/fts#searchField> \"id\".
                      ?item <http://www.bigdata.com/rdf/fts#searchResultType> \"URI\".
                    }
                  }
                }
                <http://www.bigdata.com/queryHints#Prior> <http://www.bigdata.com/queryHints#runFirst> \"true\"^^<http://www.w3.org/2001/XMLSchema#boolean>.
                ?item rso:displayLabel ?label.
                OPTIONAL {?item skos:inScheme ?schema .}
              } LIMIT 500
            }
            OPTIONAL { ?child ?broader ?item. }
            BIND(BOUND(?child) AS ?hasChildren)
          }
          ORDER BY DESC(?score) ?label
          LIMIT 200
        "
      [[else]]
        "
          SELECT DISTINCT ?item ?label ?score ?hasChildren WHERE {
            BIND(?__range__ AS ?range)
            BIND(IF(?range = rso:Concept, rso:Concept_has_broader_Concept, rso:Place_is_part_of_Place) AS ?broader)
            {
              SELECT DISTINCT ?item ?score ?label WHERE {
                {
                  SELECT DISTINCT ?item ?score ?label WHERE {
                    SERVICE <http://www.bigdata.com/rdf/search#search> {
                      ?label bds:search ?__token__ ;
                      bds:relevance ?score ;
                      bds:minRelevance \"0.3\" ;
                      bds:maxRank \"50000\" ;
                      bds:matchAllTerms \"true\"  .
                    }
                    ?item rso:displayLabel ?label.
                    OPTIONAL {?item skos:inScheme ?schema .}
                  }
                }
                OPTIONAL {
                  ?subject ?__relation__ ?item .
                }
                FILTER(BOUND(?subject))
              } LIMIT 500
            }
            OPTIONAL { ?child ?broader ?item. }
            BIND(BOUND(?child) AS ?hasChildren)
          }
          ORDER BY DESC(?score) ?label
          LIMIT 200
        "
      [[/if]],
     "placeholder": "Search ... "
   }'
        geo-selector='{
     "query": "
        SELECT ?value ?label ?lat ?long WHERE {
          ?value crm:P87_is_identified_by ?coord;
                 rso:displayLabel ?label.

          ?coord wgs84_pos:lat ?lat;
                 wgs84_pos:long ?long.

          ?label bds:search ?__token__ ;
          bds:relevance ?score .
         } ORDER BY DESC(?score)  LIMIT 20
     "
   }'
      >
      </semantic-search-query-builder>
      <div data-flex-layout="row stretch-stretch">
        <div data-flex-self="size-1of3" style="flex: 0 0 0">
          <semantic-search-facet
            id="semantic-search-facet"
            value-categories='{
    "<http://www.researchspace.org/ontology/Time>": {
      "kind": "date-range",
      "valuesQuery": "
         SELECT ?dateBeginValue ?dateEndValue WHERE {
   		     $subject ?__relation__ ?date .
           ?date crm:P82a_begin_of_the_begin ?dateBeginValue ;
                 crm:P82b_end_of_the_end     ?dateEndValue .
      } ORDER BY ?dateBeginValue"
     }
    }'
          ></semantic-search-facet>
        </div>
        <semantic-search-result-holder>
          <div data-flex-self="md-full">
            <semantic-search-facet-breadcrumbs></semantic-search-facet-breadcrumbs>
            <semantic-search-result id="semantic-search-result">
              <mp-sparql-result-counts
                id="semantic-search-result-count"
                query="SELECT DISTINCT ?subject {}"
                template="{{> template}}"
              >
                <template id="template">
                  {{#if hasLimit}}
                  <bs-alert bs-style="warning" class="search-results__alert">
                    <i
                      class="fa fa-exclamation-triangle"
                      aria-hidden="true"
                    ></i>
                    <span class="num-results"
                      >Found {{numberOfResults}} matches</span
                    >
                    of {{totalNumberOfResults}} matches.
                    <strong>Please, refine your search.</strong>
                  </bs-alert>
                  {{else}}
                  <span class="num-results"
                    >Found {{numberOfResults}} matches</span
                  >
                  {{/if}}
                </template>
              </mp-sparql-result-counts>
            </semantic-search-result>
            <bs-tabs
              default-active-key="1"
              unmount-on-exit="true"
              id="search-results"
              animation="false"
              class="tabs-right"
            >
              <bs-tab event-key="1" title="Grid">
                <semantic-search-result>
                   <!-- Table of Cards -->
                   <semantic-table
                   id="grid-result"
                   options='{
                         "showFilter":false
                       }'
                   number-of-displayed-rows="10"
                   query="
                     SELECT DISTINCT ?subject ?originalSubject
                      WHERE {
                       ?subject a <http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>.
                       ?originalSubject owl:sameAs ?subject.
                      }LIMIT 100
                   "
                   tuple-template="{{>tupleTemplate}}"
                 >
                 
                   <template id="tupleTemplate">
                     <a href="/resource/?uri={{subject.value}}">
                      <mp-draggable iri="{{subject.value}}">
                      <div
                        class="rs-grid-element panel panel-default artwork-card fade-in"
                      >
                          <div class="panel-body">
                            <bs-col
                              class="thumbnailImageContainer"
                              lg="4"
                              md="12"
                              xs="12"
                            >
                            <semantic-query
                            query='SELECT DISTINCT ?imgUrl WHERE{
                                    bind("_" as ?default_imageUrl)
                                    OPTIONAL{
                                    <{{originalSubject.value}}> <http://www.cidoc-crm.org/cidoc-crm/P138i_is_represented_by> ?visual. 
                                    ?visual crm:P128i_is_carried_by ?image .
                                    ?image crm:P129i_is_subject_of ?fullsizeImgUrl.
                                    BIND(REPLACE(STR(?fullsizeImgUrl),"full/full","full/200,") AS ?smallerImgUrl).
                                    }
                                    BIND(coalesce(?smallerImgUrl, ?default_imageUrl) as ?imgUrl)
                                  }LIMIT 1'
                            template="{{> imageThumbnail}}"
                          >
                            <template id="imageThumbnail">
                              <img
                              alt='   '
                              class="thumbnailImage"
                              src="{{bindings.0.imgUrl.value}}"
                              />
                            </template>
                          </semantic-query>
                            </bs-col>
                            <bs-col class="cardInfo" lg="7" md="10" xs="10">
                              <div data-flex-layout="row md-column center-stretch">
                                <bs-row class="cardInfoFields">
                                  <h2>Title</h2>
                                  <h4><semantic-link iri="{{subject.value}}"></semantic-link></h4>
                                  <h2>Created by</h2>
                                  <h4>
                                    <!-- Show Creator -->
                                    <semantic-query query='SELECT ?creator WHERE{
                                    <{{subject.value}}> <https://pharos.artresearch.net/resource/fr/Work_created_from_Artist> ?creator
                                    }'>
                                    <semantic-link iri="{{creator.value}}"></semantic-link>
                                    </semantic-query>
                                  </h4>
                                    <!-- Show Production date -->
                                    <semantic-query query='SELECT ?productionDate WHERE{
                                      <{{originalSubject.value}}> <http://www.cidoc-crm.org/cidoc-crm/P108i_was_produced_by> ?production .
                                      ?production <http://www.cidoc-crm.org/cidoc-crm/P4_has_time-span> ?timespan .
                                      ?timespan crm:P82_at_some_time_within ?productionDate
                                    }' template="{{>productionDateTemplate}}">
                                    <template id="productionDateTemplate">
                                      <h2>Production Date</h2>
                                      <h4>
                                      {{bindings.0.productionDate.value}}
                                      </h4>
                                    </template>
                                    </semantic-query>
                                </bs-row>
                              </div>
                            </bs-col>
                          </div>
                      </div>
                      </mp-draggable>
                    </a>
                   </template>
                 </semantic-table>
                </semantic-search-result>
              </bs-tab>
              <bs-tab event-key="2" title="Table">
                <div id="tableView">
                <semantic-search-result>
                  <semantic-table
                    id="semantic-search-result-table"
                    query="SELECT DISTINCT ?subject ?originalSubject WHERE {  ?subject a <http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object>.
                      ?originalSubject owl:sameAs ?subject.} ORDER BY ?subject"
                    options='{"showFilter":false, "resultsPerPage":10}
                    '
                    column-configuration='[
                    {"variableName": "subject", "displayName": "Enriched Record"},
                    {"variableName": "originalSubject", "displayName": "Original record"}
                    ]'
                  >
                  </semantic-table>
                </semantic-search-result>
              </div>
              </bs-tab>
              <bs-tab event-key="3" title="Chart">
                <semantic-search-result-context
                  ranges='["http://www.researchspace.org/ontology/Concept", "http://www.researchspace.org/ontology/Place", "http://www.researchspace.org/ontology/Actor"]'
                >
                  <semantic-search-result id="semantic-search-result-chart">
                    <mp-component-toolbar>
                      <mp-component-toolbar-actions>
                        <semantic-chart-type-selector
                          id="search-result-chart-type-selector"
                          default="bar"
                          types='["line", "bar", "radar", "pie", "donut"]'
                          style="margin-right: 10px"
                        ></semantic-chart-type-selector>
                        <mp-component-toolbar-action-download></mp-component-toolbar-action-download>
                        <mp-component-toolbar-action-save
                          id="persit-component-action"
                          add-to-default-set="true"
                        ></mp-component-toolbar-action-save>
                      </mp-component-toolbar-actions>
                      <mp-component-toolbar-component>
                        <semantic-chart
                          id="search-result-chart"
                          query='
                                             SELECT ?object (COUNT(DISTINCT ?subject) as ?count) WHERE {
                                               OPTIONAL { ?subject ?__contextRelation__ ?object }
                                               BIND(IF(BOUND(?object), ?object, "Unknown") as ?object)
                                             } GROUP BY ?object ORDER BY DESC(?count)
                                             '
                          sets='[{
                                              "category": "object",
                                              "value": "count"
                                            }]'
                        >
                        </semantic-chart>
                      </mp-component-toolbar-component>
                    </mp-component-toolbar>
                  </semantic-search-result>
                </semantic-search-result-context>
              </bs-tab>
              <bs-tab event-key="4" title="Timeline">
                <div>
                  <semantic-search-result>
                    <mp-sparql-result-counts
                      id="timeline-search-result-count"
                      query="SELECT DISTINCT ?subject {} LIMIT 100"
                      template="{{> template}}"
                    >
                      <template id="template">
                        {{#if hasLimit}}
                        <bs-alert
                          bs-style="warning"
                          class="search-results__alert"
                        >
                          <i
                            class="fa fa-exclamation-triangle"
                            aria-hidden="true"
                          ></i>
                          <span class="num-results">
                            There were {{totalNumberOfResults}} results. Only
                            100 can be visualised on the timeline at once!
                          </span>
                        </bs-alert>
                        {{/if}}
                      </template>
                    </mp-sparql-result-counts>
                  </semantic-search-result>

                  <semantic-search-result-context
                    ranges='["http://www.researchspace.org/ontology/Time"]'
                  >
                    <semantic-search-result>
                      <mp-component-toolbar>
                        <mp-component-toolbar-actions>
                          <mp-component-toolbar-action-save
                            id="persit-component-action"
                            add-to-default-set="true"
                          ></mp-component-toolbar-action-save>
                        </mp-component-toolbar-actions>
                        <mp-component-toolbar-component>
                          <semantic-timeline
                            id="search-result-timeline"
                            query="PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>
                                 SELECT DISTINCT ?start ?end ?iri WHERE {
                                    FILTER(?__contextRelationPattern__)
                                    BIND(?__dateBeginValue__ AS ?start)
                                    BIND(?__dateEndValue__ AS ?end)
                                    BIND(?subject as ?iri) .
                                 }
                                 ORDER BY ?subject
                                 LIMIT 100
                                 "
                            tuple-template="{{> timelineItem}}"
                            tuple-template-height="50"
                          >
                            <template id="timelineItem">
                              <mp-popover>
                                <mp-popover-trigger
                                  placement="top"
                                  trigger='["hover"]'
                                  root-close="false"
                                >
                                  <div data-flex-layout="column top-left">
                                    <p>{{start.value}} - {{end.value}}</p>
                                    <semantic-link
                                      uri="{{iri.value}}"
                                    ></semantic-link>
                                  </div>
                                </mp-popover-trigger>
                                <mp-popover-content
                                  >{{>
                                  rsp:itemCardTemplate}}</mp-popover-content
                                >
                              </mp-popover>
                            </template>
                          </semantic-timeline>
                        </mp-component-toolbar-component>
                      </mp-component-toolbar>
                    </semantic-search-result>
                  </semantic-search-result-context>
                </div>
              </bs-tab>
            </bs-tabs>

            <hr />
            <div
              class="semantic-search-results-actions pull-right"
              style="display: flex"
            >
              <semantic-search-result>
                <mp-sparql-download
                  id="csv-result"
                  query="SELECT ?subject WHERE { }"
                  header="text/csv"
                  filename="csv-result.csv"
                >
                  <button class="btn btn-default" style="margin-right: 10px">
                    Download CSV
                  </button>
                </mp-sparql-download>
              </semantic-search-result>
              <semantic-search-result>
                <mp-sparql-download
                  id="json-result"
                  query="SELECT ?subject WHERE { }"
                  header="application/sparql-results+json"
                  filename="json-result.json"
                >
                  <button class="btn btn-default" style="margin-right: 10px">
                    Download JSON
                  </button>
                </mp-sparql-download>
              </semantic-search-result>
              <semantic-search-action-use-result-in-extended-search>
                <button class="btn btn-default" style="margin-right: 10px">
                  Use in Search
                </button>
              </semantic-search-action-use-result-in-extended-search>
              <mp-anonymous-hidden>
                <semantic-search-action-save-set-result
                  id="save-set-result-action"
                >
                  <button class="btn btn-default" style="margin-right: 10px">
                    Save As Set
                  </button>
                </semantic-search-action-save-set-result>
              </mp-anonymous-hidden>
              <mp-anonymous-hidden>
                <semantic-search-action-save-search-result
                  id="save-search-result-action"
                  add-to-default-set="true"
                >
                  <button class="btn btn-default" style="margin-right: 10px">
                    Save As Search
                  </button>
                </semantic-search-action-save-search-result>
              </mp-anonymous-hidden>
            </div>
          </div>
        </semantic-search-result-holder>
      </div>
    </semantic-search>
  </div>
  [[/rsp:ClipboardSidebar]]
</div>

<style>
  .QueryBuilder--addDisjunctButton {
    visibility: initial !important;
    height: 5vh !important;
    margin-top: 8px;
  }
  .QueryBuilder--addConjunctButton {
    visibility: initial !important;
    height: 5vh !important;
    margin-top: 8px;
  }

  .QueryBuilder--searchExpand.QueryBuilder--searchCollapseExpand.QueryBuilder--searchCollapseExpand
    + .search-summary {
    margin: unset;
    position: unset;
    top: unset;
    left: unset;
    width: unset;
    font-size: unset;
    text-align: unset;
    font-weight: unset;
    height: unset;
    background-image: unset;
  }

  .QueryBuilder--searchCollapse.QueryBuilder--searchCollapseExpand.QueryBuilder--searchCollapseExpand
    + .search-summary {
    margin: unset;
    position: unset;
    top: unset;
    left: unset;
    width: unset;
    height: unset;
    background-image: unset;
    font-size: unset;
    text-align: unset;
    font-weight: unset;
    font-size: large !important;
  }

  .search-summary {
    margin: 0 5px 0 0;
    position: absolute;
    top: -10vh;
    left: -10vw;
    width: 100%;
    font-size: x-large;
    text-align: center;
    font-weight: bold;
    height: 100vh;
    width: 100vw;
    background-image: url("https://iiif.artresearch.net/iiif/2/marburg!fm145604.jpg/full/full/0/default.jpg");
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
  }
  
  .search-summary .SearchSummary--start {
    position: absolute;
    top: 10vh;
    left: 0;
    width: 100%;
    font-size: 38px;
    color: white !important;
    text-align: center;
    filter: drop-shadow(2px 4px 6px black);
  }
  .QueryBuilder--searchCollapse.QueryBuilder--searchCollapseExpand.QueryBuilder--searchCollapseExpand
  + .search-summary .SearchSummary--start
  {
    position: unset;
    top: unset;
    left: unset;
    color: unset;
    width: unset;
    font-size: unset;
    text-align: unset;
    filter:unset;
  }
  .QueryBuilder--domainSelection {
    position: absolute;
    top: 12vh;
    display: flex;
    min-width: fit-content;
    margin-left: 0px !important;
    justify-content: space-evenly;
    width: 80vw;
    height: 30vh;
    align-items: center;
    flex-wrap: wrap;
    border-radius: 4px;
    background: rgb(255 255 255 / 90%);
  }

  .QueryBuilder--domainSelection li {
    border-top: none !important;
    font-size: large;
    height: 8vh !important;
    width: fit-content;
    border-radius: 4px;
    background: transparent;
  }

  .QueryBuilder--domainSelection li .semantic-search__class-selector-item img {
    height: 5vh !important;
  }

  .ItemSelector--itemHolder:focus,
  .ItemSelector--itemHolder:hover {
    background-color: #d1323915;
  }

  .QueryBuilder--itemHolder {
    height: 5vh;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    box-shadow: 0px 2px 2px 0px lightgrey;
    padding-left: 12px;
    padding-right: 12px;
    min-width: 140px;
    min-height: 50px;
  }

  .QueryBuilder--searchClause {
    margin: 10px 0;
    flex-wrap: wrap;
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    height: fit-content;
    position: relative;
    border: none !important;
  }

  .QueryBuilder--selectedItem:after {
    content: "";
    position: absolute;
    width: 35.12px;
    height: 35.12px;
    top: 8px;
    right: -15px;
    transform: scaleX(0.7) rotate(45deg);
    padding: 0;
    z-index: 1;
    border: 1px solid #ccc;
    border-bottom: none;
    border-left: none;
    background-color: #fff;
    margin-bottom: 8px;
  }

  .ItemSelector--itemHolder {
    height: 5vh !important;
  }

  .QueryBuilder--searchAreaHolder {
    display: flex;
    justify-content: flex-start;
    align-items: top;
    width: 90;
    width: 83%;
    position: relative;
    left: 10%;
    margin-top: 4%;
  }

  .QueryBuilder--searchAreaHolder img {
    height: 3vh !important;
    width: unset !important;
    filter: invert(30%) sepia(60%) saturate(3000%) hue-rotate(-10deg) brightness(65%) contrast(100%);
  }
  .semantic-search__class-selector-item {
    margin-right: 8px !important;
  }
  .QueryBuilder--magnifierIcon {
    width: 100% !important;
    height: 100% !important;
    left: 0 !important;
    top: 0 !important;
    background-position-y: center;
    background-position-x: center;
    filter: hue-rotate(130deg);
    background-image: url(../../assets/images/icons/relation.svg) !important;
    background-size: contain;
  }
  .QueryBuilder--nestedSearchButton {
    width: 5vw;
  }
  .QueryBuilder--nestedSearchButton img {
    display: none !important;
  }
  .SearchSummary--domain,
  .SearchSummary--Resource {
    width: max-content;
    font-weight: 600;
    color: #961319 !important;
    font-size: 15px;
    line-height: 1.2;
  }

  .facet__category-selector-holder .category-selector li {
    border-right: none;
    border: none !important;
    margin: 4px;
    min-width: 50px;
    padding: 10px;
    box-shadow: 1px 1px 4px 1px lightgrey;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 50px;
  }
  .facet__category-selector-holder .category-selector .category-item-holder {
    min-width: 30px;
  }
  .facet__relation__header:focus,
  .facet__relation__header:hover {
    background-color: #d1323915 !important;
  }
  .category-item-holder--active {
    background-color: transparent !important;
  }
  .show-facet-button__show {
    margin-left: -38% !important;
  }
  .clearable-input {
    border: none !important;
  }
  .clearable-input__clear {
    width: 45px;
    height: 3vh !important;
    color: var(--color-dark--op50, rgba(29, 10, 112, 0.5));
    border: none !important;
  }
  .facet-relations {
    margin-left: 17%;
    margin-top: 5%;
  }
  .facet__relation__values__value:focus,
  .facet__relation__values__value:hover {
    background-color: #d1323915 !important;
  }
  .FacetBreadcrumbs--cancelButton {
    min-width: 30px;
    max-width: 60px;
    width: 2vw;
    padding: 0 !important;
  }
  .QueryBuilder--removeConjunctButton {
    height: 6.5vh !important;
  }
  .Select-control {
    border-bottom-color: #79323660 !important;
  }
  .artwork-card {
    width: 100% !important;
    min-height: 23vh;
    height: fit-content;
    padding: 2vh 0 2vh 0;
  }

  .cardInfo {
    position: relative;
    left: 5vw;
    top: 0vh;
    background: #ffffffe8;
    border-radius: 0px 0px 4px 4px;
  }

  .cardInfoFields{
    padding: 1vh;
  }
  #search-results .rs-grid-element.panel {
    background: white !important;
  }
  #search-results .rs-grid-element:hover {
    box-shadow: 1px 2px 8px 0 #761f0e35, 1px 3px 12px 2px rgba(0, 0, 0, 0.07);
  }
  #search-results .rs-grid-element.panel-default {
    border-color: #e9e9e9;
    overflow: hidden;
    padding: 0;
    width: 35vw !important;
  }
  .panel-body {
    cursor: pointer;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    user-select: unset !important;
  }
  #search-results .rs-grid-element .panel-body {
    cursor: pointer;
    font-size: large;
    align-items: center;
    display: flex !important;
  }
  #search-results .rs-grid-element a{
    color: #6b0000!important;
  }
  .thumbnailImageContainer {
    display: flex;
    overflow: hidden;
    align-items: center;
    border-radius: 5px 0px 0px 5px;
    padding: 0;
    position: absolute;
    height: -moz-available;
    height: -webkit-fill-available;
    height: fill-available;
    left: 0;
    top: 0;
    min-height: 23vh;
  }
  .thumbnailImage {
    width: fit-content;
    min-height: 23vh;
    height: unset;
    max-height: unset;
    min-width: unset;
    object-fit: cover;
  }

  #tableView{
    margin: 10px;
    padding: 20px;
    box-shadow: 0px 0px 20px 1px #f8f8f8;
  }
  #tableView th {
    font-size: medium !important;
    font-weight: 600;
    color: #616161 !important;
    border-bottom-color: #f4f4f4 !important;
  }


  #tableView .standard-row a {
    font-size: medium !important;
    color: #6b0000 !important;
    text-decoration: none !important;
    white-space: normal !important;
  }
  .semantic-facet-holder .facet {
    background: white;
}
  .fade-in {
    -webkit-animation: fade-in-fwd 0.8s cubic-bezier(0.39, 0.575, 0.565, 1) both;
    animation: fade-in-fwd 0.8s cubic-bezier(0.39, 0.575, 0.565, 1) both;
  }
  @media (max-width: 800px) {
    .thumbnailImageContainer {
    justify-content: center;
    }
    .cardInfo {
    left: 0vw;
    top: 0vh;
  }
   
  }
</style>

