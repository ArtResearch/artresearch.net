<div
  class="rs-grid-element panel panel-default artwork-card fade-in-fwd"
>
  <semantic-link iri="{{subject.value}}">
    <div class="panel-body">
      <bs-col
        class="thumbnailImageContainer"
        lg="4"
        md="12"
        xs="12"
      >
      <!-- Show thumbnail -->
      <semantic-query
      query='SELECT DISTINCT ?imgUrl WHERE{
              bind("_" as ?default_imageUrl)
              OPTIONAL{
                {
                  <{{subject.value}}> <http://www.cidoc-crm.org/cidoc-crm/P138i_is_represented_by> ?visual. 
                  ?visual crm:P128i_is_carried_by ?image .
                  ?image crm:P129i_is_subject_of ?fullsizeImgUrl.
                  OPTIONAL{
                  ?fullsizeImgUrl <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?type.
                  ?type rdfs:label ?typeLabel.
                  FILTER(?typeLabel != "verso")
                  }
                  BIND(REPLACE(STR(?fullsizeImgUrl),"full/full","full/200,") AS ?smallerImgUrl).
                }
                UNION{
                  ?originalSubject owl:sameAs <{{subject.value}}>.
                  ?originalSubject <http://www.cidoc-crm.org/cidoc-crm/P138i_is_represented_by> ?visual. 
                  ?visual crm:P128i_is_carried_by ?image .
                  ?image crm:P129i_is_subject_of ?fullsizeImgUrl.
                  OPTIONAL{
                    ?fullsizeImgUrl <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> ?type.
                    ?type rdfs:label ?typeLabel.
                    FILTER(?typeLabel != "verso")
                    }
                  BIND(REPLACE(STR(?fullsizeImgUrl),"full/full","full/200,") AS ?smallerImgUrl).
                }
          
              }
              BIND(coalesce(?smallerImgUrl, ?default_imageUrl) as ?imgUrl)
            }LIMIT 1'
      template="{{> imageThumbnail}}"
    >
      <template id="imageThumbnail">
        <img
        alt='   '
        class="thumbnailImage"
        src="{{bindings.0.imgUrl.value}}"
        />
      </template>
    </semantic-query>
      </bs-col>
      <bs-col class="cardInfo" lg="7" md="10" xs="10">
        <div data-flex-layout="row md-column center-stretch">
          <bs-row class="cardInfoFields">
      <!-- Show information on subject & owl:sameAs -->
            <semantic-query
            query='
            SELECT (GROUP_CONCAT(STR(?originalSubject);SEPARATOR=" , ") AS ?additionalSubjects) WHERE{
              ?originalSubjects owl:sameAs <{{subject.value}}>.
              BIND(CONCAT("\"",str(?originalSubjects),"\"") as ?originalSubject)
              }
              '
            template="{{> combinedFields}}">
              <template id="combinedFields">
                <mp-field-visualization
                additional-subjects='[
                {{bindings.0.additionalSubjects.value}}
                ]'
                subject='{{subject.value}}'
                  fields='[[fieldDefinitions  
                Title="https://pharos.artresearch.net/fieldDefinition/2"
                Creator="https://pharos.artresearch.net/fieldDefinition/1"  
                ProductionDate="https://pharos.artresearch.net/fieldDefinition/8"
                Repository="https://pharos.artresearch.net/fieldDefinition/Repository"
              ]]'
                template="{{>generalInfo}}"
              >
                <template id="generalInfo">
                  [[> rsp:ResourceFieldBasedVisualization
                  subject=[[this]] ]]
                </template>
              </mp-field-visualization>
              <div>
                <mp-field-visualization
                additional-subjects='[
                {{bindings.0.additionalSubjects.value}}
                ]'
                subject='{{subject.value}}'
                  fields='[[fieldDefinitions  
                  Type="https://pharos.artresearch.net/fieldDefinition/550" 
              ]]'
                template="{{>typeInfo}}"
              >
                <template id="typeInfo">
                  <div class="typeInfoValues">
                  {{#each fields as |field|}}
                    {{#each field.values as |value|}}
                    <span class="badge badge-pill">
                      <semantic-link class="typeLink" iri="{{value.value.value}}"></semantic-link>
                    </span>
                    {{/each}}
                  {{/each}}
                </div>
                </template>
              </mp-field-visualization>
              </div>
              </template>
            </semantic-query>
          </bs-row>
        </div>
      </bs-col>
    </div>
  </semantic-link\>
</div>