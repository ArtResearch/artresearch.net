(window.webpackJsonp=window.webpackJsonp||[]).push([[325],{1064:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function BrowserDetector(){var e,t,n;this._userAgent=navigator.userAgent,this._browserName=navigator.appName,this._fullVersion=""+parseFloat(navigator.appVersion),this._majorVersion=parseInt(navigator.appVersion,10),-1!=(t=this._userAgent.indexOf("Opera"))?(this._browserName="Opera",this._fullVersion=this._userAgent.substring(t+6),-1!=(t=this._userAgent.indexOf("Version"))&&(this._fullVersion=this._userAgent.substring(t+8))):-1!=(t=this._userAgent.indexOf("MSIE"))?(this._browserName="Microsoft Internet Explorer",this._fullVersion=this._userAgent.substring(t+5)):-1!=(t=this._userAgent.indexOf("Chrome"))?(this._browserName="Chrome",this._fullVersion=this._userAgent.substring(t+7)):-1!=(t=this._userAgent.indexOf("Safari"))?(this._browserName="Safari",this._fullVersion=this._userAgent.substring(t+7),-1!=(t=this._userAgent.indexOf("Version"))&&(this._fullVersion=this._userAgent.substring(t+8))):-1!=(t=this._userAgent.indexOf("Firefox"))?(this._browserName="Firefox",this._fullVersion=this._userAgent.substring(t+8)):(e=this._userAgent.lastIndexOf(" ")+1)<(t=this._userAgent.lastIndexOf("/"))&&(this._browserName=this._userAgent.substring(e,t),this._fullVersion=this._userAgent.substring(t+1),this._browserName.toLowerCase()==this._browserName.toUpperCase()&&(this._browserName=navigator.appName)),-1!=(n=this._fullVersion.indexOf(";"))&&(this._fullVersion=this._fullVersion.substring(0,n)),-1!=(n=this._fullVersion.indexOf(" "))&&(this._fullVersion=this._fullVersion.substring(0,n)),this._majorVersion=parseInt(""+this._fullVersion,10),isNaN(this._majorVersion)&&(this._fullVersion=""+parseFloat(navigator.appVersion),this._majorVersion=parseInt(navigator.appVersion,10))}return Object.defineProperty(BrowserDetector.prototype,"userAgent",{get:function(){return this._userAgent},enumerable:!0,configurable:!0}),Object.defineProperty(BrowserDetector.prototype,"browserName",{get:function(){return this._browserName},enumerable:!0,configurable:!0}),Object.defineProperty(BrowserDetector.prototype,"fullVersion",{get:function(){return this._fullVersion},enumerable:!0,configurable:!0}),Object.defineProperty(BrowserDetector.prototype,"majorVersion",{get:function(){return this._majorVersion},enumerable:!0,configurable:!0}),BrowserDetector}();t.default=new n},1080:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=n(1),i=n(35),s=n(63),a=n(56),l=n(120),u=n(1081),p=n(122),c=n(1087),m=n(309),f=function(e){function PageComponent(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(PageComponent,e),PageComponent.prototype.render=function(){var e={iri:s.getCurrentResource(),params:s.getCurrentUrl().search(!0)},t=s.getCurrentUrl().hasQuery("action","edit")?l.ComponentsLoader.factory({componentTagName:"mp-internal-page-editor",componentProps:e}):m.default(e);return r.createElement(a.BaseSemanticContextProvider,{repository:s.getCurrentRepository()},i.div({className:"page-holder"},c.default(e),p.DefaultRepositoryInfo.isValidDefault()?t:r.createElement(u.RepositoryConfigInitializer)))},PageComponent}(r.Component);t.PageComponent=f,t.default=f},1081:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=n(1),i=n(72),s=n(34),a=n(56),l=n(122),u=n(660),p=n(1086),c=function(e){function RepositoryConfigInitializer(t,n){var o=e.call(this,t,n)||this;return o.cancellation=new s.Cancellation,o.state={},o}return o.__extends(RepositoryConfigInitializer,e),RepositoryConfigInitializer.prototype.componentDidMount=function(){var e=this;this.cancellation.map(l.getRepositoryConfigTemplates()).observe({value:function(t){return e.setState({repositoryTemplates:t})},error:function(t){return e.setState({loadingError:t})}})},RepositoryConfigInitializer.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},RepositoryConfigInitializer.prototype.render=function(){var e=this.state,t=e.loadingError,n=e.repositoryTemplates;return t?r.createElement(i.Alert,{bsStyle:"info"}," ",t," "):r.createElement("div",{"data-flex-layout":"row top-center"},r.createElement("div",{className:p.editorArea},r.createElement("h2",null,"Please configure the default repository"),r.createElement("p",null,"There is no configuration for the default repository in the system. Please set the configuration of the repository you would like to use as the system default, then validate the connection and confirm with Update Config. The configuration has to be expressed in the RDF Turtle format. You can select a template for some of the commonly used repository types."),r.createElement(i.Row,null,r.createElement(i.Col,{sm:2},r.createElement("b",null,"neptune"),r.createElement("p",null,"For use with Amazon Neptune.")),r.createElement(i.Col,{sm:2},r.createElement("b",null,"stardog"),r.createElement("p",null,"For use with a Stardog repository")),r.createElement(i.Col,{sm:3},r.createElement("b",null,"sparql"),r.createElement("p",null,"Use with any SPARQL 1.1 compliant database endpoint where authentication is not required, e.g. Blazegraph, RDF4J")),r.createElement(i.Col,{sm:3},r.createElement("b",null,"sparql-basic"),r.createElement("p",null,'Same as "sparql", but includes basic authentication. Can be used for GraphDB amongst others.'))),r.createElement(i.Alert,{bsStyle:"info"},"In the template, please replace all placeholders marked with ","{","% and %","} ","with your actual values."),r.createElement(u.RepositoryConfigEditor,{id:"default",repositoryTemplates:n,showRestartPrompt:!0,reloadPageOnSuccess:!0,initializerMode:!0,preselectedTemplate:"sparql"})))},RepositoryConfigInitializer}(a.Component);t.RepositoryConfigInitializer=c,t.default=c},1087:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(11),i=n(1),s=n(35),a=n(72),l=n(641),u=n(19),p=n(56),c=n(633),m=n(121),f=n(61),d=n(34),h=n(214),g=n(1092),y=i.createFactory(a.ButtonGroup),b=i.createFactory(a.ButtonToolbar),_=function(e){function PageEditorToolbarComponent(t,n){var o=e.call(this,t,n)||this;return o.cancellation=new d.Cancellation,o.currentIri=h.Action(),o.canShowExploreActions=function(e){return o.checkIfPageIsResource(e).flatMap((function(e){return(e?o.hasExploreActionsPermissions():u.constant(!1)).map((function(t){return{pageIsResource:e,showExploreActions:t}}))}))},o.hasExploreActionsPermissions=function(){return m.Util.isPermitted(m.Permissions.pageToolbarExplore)},o.checkIfPageIsResource=function(e){return f.SparqlClient.select(f.SparqlClient.setBindings(PageEditorToolbarComponent.isResourceQuery,{iri:e}),{context:o.context.semanticContext}).map((function(e){return!f.SparqlUtil.isSelectResultEmpty(e)}))},o.renderIriCopyAction=function(){return i.createElement(l,{text:o.props.iri.value},s.a({className:"btn btn-default component-page-toolbar__btn_copy_iri",title:"Copy IRI"}))},o.renderExploreActions=function(){return[i.createElement(g.ResourceViewer,{pageIri:"http://www.researchspace.org/resource/system/SourceStatements",title:"Statements",isOpen:"true"===o.props.params.showStatements,params:{urlqueryparamShowStatements:"true"}},s.a({className:"btn btn-default component-page-toolbar__btn_show_source",title:"Show Statements"})),i.createElement(g.ResourceViewer,{pageIri:"http://www.researchspace.org/resource/system/SourceGraph",title:"Graph"},s.a({className:"btn btn-default component-page-toolbar__btn_show_graph",title:"Show Graph"})),i.createElement(g.ResourceViewer,{pageIri:"http://www.researchspace.org/resource/system/SourceDiagram",title:"Diagram"},s.a({className:"btn btn-default component-page-toolbar__btn_show_diagram",title:"Show Diagram"}))]},o.state={hasEditPermission:!1,showExploreActions:!1,pageIsResource:!1},o.cancellation.map(o.currentIri.$property.flatMap(o.canShowExploreActions)).onValue((function(e){return o.setState(e)})),o}return r.__extends(PageEditorToolbarComponent,e),PageEditorToolbarComponent.prototype.componentDidMount=function(){var e=this;m.Util.isPermitted(m.Permissions.templateSave+":<"+this.props.iri.value+">").onValue((function(t){return e.setState({hasEditPermission:t})})),this.currentIri(this.props.iri)},PageEditorToolbarComponent.prototype.componentWillReceiveProps=function(e){var t=this;this.props.iri.value!==e.iri.value&&m.Util.isPermitted(m.Permissions.templateSave+":<"+e.iri.value+">").onValue((function(e){return t.setState({hasEditPermission:e})})),this.currentIri(e.iri)},PageEditorToolbarComponent.prototype.componentWillUnmount=function(){this.cancellation.cancelAll()},PageEditorToolbarComponent.prototype.render=function(){return b({className:"component-page-toolbar hidden-print"},y.apply(void 0,r.__spreadArrays([{},this.showAssetsRepositoryIndicator(),this.state.hasEditPermission?i.createElement(c.ResourceLink,{resource:this.props.iri,className:"btn btn-default component-page-toolbar__btn_edit",activeClassName:"active",title:"Edit Page",action:c.ResourceLinkAction.edit},s.div({},s.i({className:"fa fa-pencil"}),s.span({}," Edit Page"))):null],this.state.showExploreActions?this.renderExploreActions():[null],[this.state.pageIsResource?this.renderIriCopyAction():null])))},PageEditorToolbarComponent.prototype.showAssetsRepositoryIndicator=function(){return"assets"===this.context.semanticContext.repository&&this.state.hasEditPermission?s.div({className:"badge alert-info component-page-toolbar__repository_indicator"},"assets repository"):null},PageEditorToolbarComponent.isResourceQuery=f.SparqlUtil.Sparql(o||(o=r.__makeTemplateObject(["\n    SELECT * WHERE {\n      { ?iri ?p ?o } UNION { ?s ?p ?iri }\n    } LIMIT 1\n  "],["\n    SELECT * WHERE {\n      { ?iri ?p ?o } UNION { ?s ?p ?iri }\n    } LIMIT 1\n  "]))),PageEditorToolbarComponent}(p.Component);t.PageToolbar=i.createFactory(_),t.default=t.PageToolbar},1092:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=n(1),i=n(117),s=n(1093),a=function(e){function ResourceViewer(){var t=null!==e&&e.apply(this,arguments)||this;return t.openDialog=function(){var e="show-source-statements-"+t.props.title;i.getOverlaySystem().show(e,r.createElement(s.ResourceViewerDialog,t.props))},t}return o.__extends(ResourceViewer,e),ResourceViewer.prototype.componentDidMount=function(){this.props.isOpen&&this.openDialog()},ResourceViewer.prototype.componentDidUpdate=function(e){this.props.isOpen&&this.openDialog()},ResourceViewer.prototype.render=function(){var e={onClick:this.openDialog};return r.cloneElement(r.Children.only(this.props.children),e)},ResourceViewer}(r.Component);t.ResourceViewer=a},1093:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(11),r=n(1),i=n(1),s=n(117),a=n(337),l=function(e){function ResourceViewerDialog(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(ResourceViewerDialog,e),ResourceViewerDialog.prototype.render=function(){return r.createElement(s.OverlayDialog,{type:"modal",onHide:function(){s.getOverlaySystem().hideAll()},title:this.props.title,show:!0,className:"resource-viewer-modal",bsSize:"lg"},r.createElement(a.component,o.__assign({iri:this.props.pageIri},this.props.params)))},ResourceViewerDialog}(i.Component);t.ResourceViewerDialog=l},1544:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(11);n(652),n(340).initModuleRegistry();var r=n(120),i=n(1064),s=n(1),a=n(35),l=n(20),u=n(10),p=n(16),c=n(19),m=n(33),f=n(61),d=n(116),h=n(117),g=n(63),y=n(141),b=n(221),_=n(144),w=n(121),v=n(140),E=n(122),C=n(1080),I=n(630);customElements.define("mp-template-item",I.TemplateItemComponent);var R=n(1097),S=document.title,AsyncSparqlEndpointComponent=function(e){return r.ComponentsLoader.factory({componentTagName:"mp-internal-sparql-endpoint",componentProps:e})},A=function(e){function MainAppComponent(t,n){var o=e.call(this,t,n)||this;return o.getSessionTimeout=function(){w.Util.getSessionInfo((function(e){R.set("sessionTimeout",e.timout)}))},o.setupSessionTimeoutCheck=function(){w.Util.getUser((function(e){e.isAnonymous&&!p.isEqual(R.get("anonymousWarning"),R.get("JSESSIONID"))?(d.addNotification({message:'Your are authenticated as anonymous "guest" user only',level:"warning",autoDismiss:2,action:{label:"Login",callback:function(){return window.location.href="/login"}}}),R.set("anonymousWarning",R.get("JSESSIONID"))):e.isAnonymous||(o.sessionIntervalID=window.setInterval(o.checkSessionTimeout.bind(o),6e4))}))},o.checkSessionTimeout=function(){var e=parseInt(R.get("lastRequestTime")),t=parseInt(R.get("sessionTimeout"));if(!p.isNaN(t)||!p.isNaN(e))if(t<0)window.clearInterval(o.sessionIntervalID);else{var n=u(t).diff(u(Date.now()-e),"minutes");if(!(n>10)){var r=u(Date.now()-e).to(t);n<0&&(d.addNotification({title:"Session Info",autoDismiss:0,message:"Your session is expired.",level:"error",action:{label:"Login",callback:function(){return window.location.href="/login"}}}),window.clearInterval(o.sessionIntervalID)),d.addNotification({title:"Session Info",autoDismiss:57,message:"Your session is about to expire "+r,level:"warning",action:{label:"Extend Session",callback:function(){return w.Util.touchSession((function(){}))}}})}}},o.state={headerHTML:m.Nothing(),footerHTML:m.Nothing(),route:o.getRoute(g.getCurrentUrl())},o}return o.__extends(MainAppComponent,e),MainAppComponent.prototype.getRoute=function(e){return"sparql"===p.last(e.segment())?(this.updatePageTitle(!0),AsyncSparqlEndpointComponent):(this.updatePageTitle(!1),C.default)},MainAppComponent.prototype.updatePageTitle=function(e){if(e)document.title="SPARQL Endpoint ["+S+"]";else try{v.getLabel(g.getCurrentResource()).onValue((function(e){return document.title=e+" ["+S+"]"})).onError((function(e){document.title=S,console.error(e)}))}catch(e){console.error(e),document.title=S}},MainAppComponent.prototype.componentDidMount=function(){var e=this;this.getSessionTimeout(),_.getHeader((function(t){return r.ModuleRegistry.parseHtmlToReact(t).then((function(t){return e.setState({headerHTML:m.Just(t)})}))})),_.getFooter((function(t){return r.ModuleRegistry.parseHtmlToReact(t).then((function(t){return e.setState({footerHTML:m.Just(t)})}))})),this.addLastRequestTimeInterceptorToHttpRequests(),d.registerNotificationSystem(this),h.registerOverlaySystem(this),this.setupSessionTimeoutCheck(),g.listen({eventType:"NAVIGATED",callback:function(t){e.setState({route:e.getRoute(t.url)})}});var t=R.get("browserWarning"),n=y.ConfigHolder.getUIConfig().supportedBrowsers,o=y.ConfigHolder.getUIConfig().unsupportedBrowserMessage;!t&&n&&o&&(n.some((function(e){var t=e.split(/-\s*([^-]+)$/);if(i.default.browserName===t[0]&&i.default.majorVersion<parseInt(t[1],10))return!0}))||n.every((function(e){var t=e.split(/-\s*([^-]+)$/);if(i.default.browserName!==t[0])return!0})))&&(d.addNotification({title:"Browser not supported",autoDismiss:0,message:o,level:"error"}),R.set("browserWarning",!0))},MainAppComponent.prototype.addLastRequestTimeInterceptorToHttpRequests=function(){var e;e=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(t,n,o,r,i){this.addEventListener("readystatechange",(function(){R.set("lastRequestTime",Date.now())}),!1),e.call(this,t,n,o,r,i)}},MainAppComponent.prototype.render=function(){return a.div.apply(a,o.__spreadArrays([{}],this.getHeader(),[d.renderNotificationSystem(),h.renderOverlaySystem(),s.createElement(this.state.route,{key:"page-holder"}),this.state.footerHTML.isNothing?null:this.state.footerHTML.get()]))},MainAppComponent.prototype.getHeader=function(){if(this.state.headerHTML.isNothing)return[null];var e=this.state.headerHTML.get();return[e,s.cloneElement(e,{style:{visibility:"hidden",position:"relative"},key:"hidden-header"})]},MainAppComponent}(s.Component);t.MainAppComponent=A,g.listen({eventType:"NAVIGATED",callback:function(e){h.getOverlaySystem()&&h.getOverlaySystem().hideAll()}}),window.addEventListener("DOMContentLoaded",(function(){c.combine({url:g.init(),prefixes:b.getRegisteredPrefixes(),rawConfig:y.ConfigHolder.fetchConfig(),repositories:E.DefaultRepositoryInfo.init()}).flatMap((function(e){var t=e.url,n=e.prefixes,o=e.rawConfig;try{f.SparqlUtil.init(n),y.ConfigHolder.initializeConfig(o)}catch(e){return c.constantError(e)}return c.constant(t)})).onValue((function(){l.render(s.createElement(A),document.getElementById("application"))})).onError((function(e){if(e instanceof w.NotEnoughPermissionsError)_.getNoPermissionsPage((function(e){return document.getElementById("application").innerHTML=e}));else{var t="Platform initialization failed: \n\n         "+e+" \n\n         Please contact the system administrator.\n        ";l.render(a.div({style:{color:"red"}},t),document.getElementById("application"))}}))}))}}]);
//# sourceMappingURL=default~app-f47c18d4fb3adb11f6ce.js.map