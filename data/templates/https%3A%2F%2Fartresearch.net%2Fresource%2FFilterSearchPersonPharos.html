<div id="person-filter-search">
   <mp-event-target-template-render
    id="event-target-tables-ULAN"
    template="{{> tableEventTargetTemplate}}"
  >
    <template id="tableEventTargetTemplate">
  <semantic-search
        relations='{
          "<https://artresearch.net/resource/fr/Person_has_Gender>":[
          {
            "kind": "resource",
            "queryPattern": "
                $subject fr:Person_has_Gender ?__value__."
          }
      ],
          "<https://artresearch.net/resource/fr/Person_has_Nationality>":[
          {
            "kind": "resource",
            "queryPattern": "
                $subject fr:Person_has_Nationality ?__value__."
          }
      ],
          "<https://artresearch.net/resource/fr/Person_has_Date_of_Birth>":[
          {
            "kind": "numeric-range",
            "queryPattern": "
                $subject fr:Person_has_Date_of_Birth ?gYear .
                FILTER(?literal >= ?__numericRangeBeginValue__) .
                FILTER(?literal <= ?__numericRangeEndValue__) .
                BIND(xsd:integer(str(?gYear)) as ?literal)."
          }],
          "<https://artresearch.net/resource/fr/Person_has_Date_of_Death>": [
          {
            "kind": "numeric-range",
            "queryPattern": "
                $subject fr:Person_has_Date_of_Death ?gYear .
                FILTER(?literal >= ?__numericRangeBeginValue__) .
                FILTER(?literal <= ?__numericRangeEndValue__) .
                BIND(xsd:integer(str(?gYear)) as ?literal)."
          }],
          "<https://artresearch.net/resource/fr/Person_has_Place_of_Birth>": [
          {
            "kind": "resource",
            "queryPattern": "
                $subject fr:Person_has_Place_of_Birth ?__value__ ."
          }],
          "<https://artresearch.net/resource/fr/Person_has_Place_of_Death>": [
          {
            "kind": "resource",
            "queryPattern": "
                $subject fr:Person_has_Place_of_Death ?__value__ ."
          }],
          "<https://artresearch.net/resource/fr/Event_has_Type>": [
          {
            "kind": "resource",
            "queryPattern": "
              
                $subject fr:Person_has_Event ?event.
                ?event fr:Event_has_Type ?__value__ ."
          }],
          "<https://artresearch.net/resource/fr/Event_at_Place>": [
          {
            "kind": "resource",
            "queryPattern": "
              
                $subject fr:Person_has_Event ?event.
                ?event fr:Event_at_Place ?__value__ ."
          }],
          "<https://artresearch.net/resource/fr/Artist_has_provider_Institution>": [
          {
            "kind": "resource",
            "queryPattern": "
              
                $subject fr:Artist_has_provider_Institution ?__value__ ."
              
          }]
            }'
        search-profile='{
              "categories":  
              [
                {
                  "iri":"<https://artresearch.net/resource/fc/artist>",
                  "label":"Artist"
                },
                {
                  "iri":"<https://artresearch.net/resource/fc/gender>",
                  "label":"Gender"
                }, 
                {
                  "iri":"<https://artresearch.net/resource/fc/nationality>",
                  "label":"Nationality"
                }, 
                {
                  "iri":"<http://www.w3.org/2001/XMLSchema#integer>",
                  "label":"Year"
                }, 
                {
                  "iri":"<http://www.cidoc-crm.org/cidoc-crm/E55_Type>",
                  "label":"Type"
                }, 
                {
                  "iri":"<https://artresearch.net/resource/fc/place>",
                  "label":"Place"
                },  {
                  "iri":"<https://artresearch.net/resource/fc/institution>",
                  "label":"Photo archive"
                }
              ],
              "relations":
              [
                {
                  "iri": "<https://artresearch.net/resource/fr/Person_has_Gender>",
                  "label":"Gender",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<https://artresearch.net/resource/fc/gender>"
                },
                {
                  "iri": "<https://artresearch.net/resource/fr/Person_has_Nationality>",
                  "label":"Nationality",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<https://artresearch.net/resource/fc/nationality>"
                },
                {
                  "iri": "<https://artresearch.net/resource/fr/Person_has_Date_of_Birth>",
                  "label":"Date of birth",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<http://www.w3.org/2001/XMLSchema#integer>"
                },
                {
                  "iri":"<https://artresearch.net/resource/fr/Person_has_Date_of_Death>",
                  "label":"Date of death",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<http://www.w3.org/2001/XMLSchema#integer>"
                },
                {
                  "iri":"<https://artresearch.net/resource/fr/Person_has_Place_of_Birth>",
                  "label":"Place of birth",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<https://artresearch.net/resource/fc/place>"
                },
                {
                  "iri":"<https://artresearch.net/resource/fr/Person_has_Place_of_Death>",
                  "label":"Place of death",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<https://artresearch.net/resource/fc/place>"
                },
                {
                  "iri":"<https://artresearch.net/resource/fr/Event_has_Type>",
                  "label":"Event type",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<http://www.cidoc-crm.org/cidoc-crm/E55_Type>"
                },
                {
                  "iri":"<https://artresearch.net/resource/fr/Event_at_Place>",
                  "label":"Event place",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<https://artresearch.net/resource/fc/place>"
                },
                {
                  "iri":"<https://artresearch.net/resource/fr/Artist_has_provider_Institution>",
                  "label":"Photo archive",
                  "hasDomain":"<https://artresearch.net/resource/fc/artist>",
                  "hasRange":"<https://artresearch.net/resource/fc/institution>"
                }
              ]
            }'
>
    <div id="header-search" class="search-page">
    <mp-event-target-template-render
    id="event-target-tables-ULAN"
    template="{{> tableEventTargetTemplate}}"
  >
    <template id="tableEventTargetTemplate">
              <semantic-search-query-keyword
                placeholder="Search for an artist e.g. Michelangelo"
                escape-lucene-syntax="false"
                domain="<https://artresearch.net/resource/fc/artist>"
                default-query=' SELECT DISTINCT ?subject WHERE {
                                  ?subject a fc:artist.
                                   ?subject fr:Artist_created_Work ?work.
                                }LIMIT 1000'
                query='SELECT DISTINCT ?subject WHERE {
                          ?subject a fc:artist.
                          ?subject rdfs:label ?someLabel.
                          ?someLabel bds:search ?__token__ .
                          ?someLabel bds:minRelevance "0.3"^^xsd:double;
                          bds:matchAllTerms "true" .
                          ?subject fr:Artist_created_Work ?work.
                        }LIMIT 1000'
              ></semantic-search-query-keyword>
              </template>
    </mp-event-target-template-render>
    </div>

    <div class="row">
        <bs-col
          lg="3"
          md="4"
          sm="5"
          class="fade-in-fwd filters-container"
          style="margin-top: 8px"
        >
              <bs-panel id="filter-panel" header="Filters"  collapsible="true" default-expanded="true">
                <semantic-search-facet open-by-default='true' sortby='count-desc' facet-values-threshold="1000"></semantic-search-facet>
              </bs-panel>
        </bs-col>
        <bs-col lg="9" md="8" sm="7">
          <semantic-search-result-holder>
              <bs-tabs unmount-on-exit="true" id="search-results" animation="false">
                <bs-tab event-key="2" title="Grid">
                    <div>
                        <semantic-search-facet-breadcrumbs></semantic-search-facet-breadcrumbs>
                        <semantic-search-result id="semantic-search-result">
                          [[> SearchResultCount]]
                          <div><h2>
                            Please note! Presenting only artists with artworks.
                          </h2></div>
                        </semantic-search-result>
                        <semantic-search-result>
                            <div id="card-results">
                              <bs-tab-container
                                id="tab-container"
                                class="page__body-navtabs--borderless"
                                default-active-key="defaultView"
                              >
                                  <div>
                                      <bs-nav bs-style="tabs">
                                        <bs-nav-item event-key="defaultView">Default view</bs-nav-item>
                                        <bs-nav-item event-key="birthplaceMap">Birthplace map</bs-nav-item>
                                        <bs-nav-item event-key="deathplaceMap">Deathplace map</bs-nav-item>
                                      </bs-nav>
                                      <bs-tab-content unmount-on-exit="true">
                                          <bs-tab-pane event-key="defaultView">
                                              <semantic-table
                                                id="grid-result"
                                                prefetch-labels="false"
                                                options='{"showFilter":false}'
                                                number-of-displayed-rows="20"
                                                query='SELECT distinct ?subject  WHERE {
                                                      }LIMIT 1000'
                                                tuple-template="{{>tupleTemplate}}"
                                                no-result-template='[[> CardNoResult ]]'
                                              >
                                                  <template id="tupleTemplate">
                                                    [[> CardPerson  ]]
                                                  </template>
                                              </semantic-table>
                                          </bs-tab-pane>
                                          <bs-tab-pane event-key="birthplaceMap">
                                              <div class="mapContainer">
                                                  <semantic-map
                                                    id="repository-map"
                                                    query="SELECT ?subject ?label ?lat ?lng WHERE {
                                                          ?subject fr::Person_has_Place_of_Birth [
                                                              <http://www.w3.org/2003/01/geo/wgs84_pos#lat> ?lat;
                                                              <http://www.w3.org/2003/01/geo/wgs84_pos#long> ?lng;
                                                              crm:P2_has_type <http://vocab.getty.edu/aat/300008389>
                                                          ];
                                                            rdfs:label ?label.
                                                        }"
                                                    tuple-template='<p></p><a style="text-decoration: none;"  href="https://artresearch.net/resource/?uri={{subject.value}}" target="_blank"><b style="color: #6b0000;">{{label.value}}</b><p></p><p></p></a><hr>'
                                                  >
                                                  </semantic-map>
                                              </div>
                                          </bs-tab-pane>
                                          <bs-tab-pane event-key="deathplaceMap">
                                              <div class="mapContainer">
                                                  <semantic-map
                                                     
                                                    id="deathplace-map"
                                                    query="SELECT DISTINCT ?subject ?place ?lat ?lng WHERE {
                                                            ?subject a fc:artist.
                                                            ?subject fr:Person_has_Place_of_Death ?place .
                                                            ?place a fc:place .
                                                            ?place <http://www.w3.org/2003/01/geo/wgs84_pos#lat> ?lat.
                                                            ?place <http://www.w3.org/2003/01/geo/wgs84_pos#long> ?lng.
                                                            }"
                                                    no-result-template='<h3>No results were found to be visualized on map</h3>'
                                                    tuple-template='<div style="width:20vw">
                                                        <h4> 
                                                          <semantic-link style="color:#6b0000;" iri="{{subject.value}}"></semantic-link>,
                                                          died at <mp-label iri="{{place.value}}"></mp-label>
                                                        </h4>
                                                      </div>'
                                                  >
                                                  </semantic-map>
                                              </div>
                                          </bs-tab-pane>
                                      </bs-tab-content>
                                  </div>
                              </bs-tab-container>
                            </div>
                        </semantic-search-result>
                    </div>
                </bs-tab>
              </bs-tabs>
          </semantic-search-result-holder>
        </bs-col>
    </div>
  </semantic-search>
  </template>
  </mp-event-target-template-render>
</div>

<style>
.keyword-search-container{
  width: 100% !important;
}
.rs-icon-search{
  display: none !important;
}

</style>